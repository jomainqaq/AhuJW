!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function t(w,c){"use strict";var v={dialog:"<div class='bootbox modal sl_mod' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",progress:"<div class='modal-progress'><div class='progress' ><div class='progress-bar progress-bar-info progress-bar-striped active' role='progressbar' aria-valuenow='0' aria-valuemin='0' aria-valuemax='100'  style='width: 0%;'>0%</div></div></div>",footer:"<div class='modal-footer'></div>",fixed:"<div class='modal-fixed'></div>",fullScreen:"<div class='bootbox-full'><span class='fa fa-square'></span></div>",closeButton:'<input type="hidden" name="focusInput"/><button type="button" class="bootbox-close-button btn-sm close bootbox-close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>',form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},y={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,fullScreen:!0,progress:!1,progressID:"bootboxStatus",btnlock:!1,draggable:!1,container:"body",width:"800px",height:c,max_height:c,fixedTarget:null,offAtOnce:!1,offsetHeight:200,offsetWidth:20,beforeRender:w.noop,afterRender:w.noop},N={};function C(t,o,a,n){t.stopPropagation(),t.preventDefault();var i=w.extend({},this,{options:a,api:window.api,content:self||window,dialog:o,document:o.find(".bootbox-body"),close:function(){o.modal("hide")},reload:function(){if(0<w.trim(a.href).length){var e=o.find(".modal-body");o.find(".modal-dialog");e.find(".bootbox-body").empty().html('<h3 class="header smaller lighter grey loading-spinner align-center"  style="min-height: 100px !important;"><i class="icon-spinner icon-spin orange bigger-160"></i><span>&nbsp;&nbsp;页面正在加载中...</span></h3>'),-1<a.href.indexOf("?")?a.href=a.href+"&time="+(new Date).getTime():a.href=a.href+"?time="+(new Date).getTime(),window.api={data:a.data||{},opener:a.opener,document:o.find(".bootbox-body")};var t=w.extend(!0,{},a.data||{});delete t.colModel,window.setTimeout(function(){w.ajaxSetup({async:!0}),e.find(".bootbox-body").empty().load(a.href,t,function(){a.isLoaded=!0,o.triggerHandler("loaded.bs.modal")}),w.ajaxSetup({async:!1})},200)}},button:function(e){if(e&&e.id){var t=w.extend(!0,{},e);delete t.id,o.find(".modal-footer").find("button[data-bb-handler='"+e.id+"']").prop(t)}}});if(a.btnlock){var r=w(t.target);w.when(w.Deferred(function(e){r.button("loading"),w.isFunction(n)&&!1===n.call(w.extend(i,{reset:function(){e.resolve()}}),t)||o.modal("hide")}).promise()).always(function(){r.button("reset")})}else{w.isFunction(n)&&!1===n.call(w.extend(i,{reset:function(){}}),t)||o.modal("hide")}}function k(e,o){var a=0;w.each(e,function(e,t){o(e,t,a++)})}function u(e,t,o){return w.extend(!0,{},e,function(e,t){var o=e.length,a={};if(o<1||4<o)throw new Error("Invalid argument length");return 3===o||"string"==typeof e[0]?(a[t[0]]=e[0],a[t[1]]=e[1],a[t[2]]=e[2]):2===o||"string"==typeof e[0]?(a[t[0]]=e[0],a[t[1]]=e[1]):a=e[0],a}(t,o))}function o(e,t,o,a){return b(u({className:"bootbox-"+e,buttons:f.apply(null,t)},a,o),t)}function f(){for(var e,t,o={},a=0,n=arguments.length;a<n;a++){var i=arguments[a],r=i.toLowerCase(),l=i.toUpperCase();o[r]={label:(e=l,void 0,t=s[y.locale],t?t[e]:s.en[e])}}return o}function b(e,t){var o={};return k(t,function(e,t){o[t]=!0}),k(e.buttons,function(e){if(o[e]===c)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}N.alert=function(){var e;if((e=o("alert",["ok"],["title","message","callback"],arguments)).draggable=!0,e.fullScreen=!1,4==arguments.length&&w.extend(e,arguments[3]),e.callback&&!w.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=e.onClose=function(){return!w.isFunction(e.callback)||e.callback.call(this)},e.isLoaded=!1,N.dialog(e)},N.confirm=function(){var e;if((e=o("confirm",["confirm","cancel"],["title","message","callback"],arguments)).draggable=!0,e.fullScreen=!1,4==arguments.length&&w.extend(!0,e,arguments[3]),e.buttons.cancel.callback=e.onEscape=e.onClose=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},!w.isFunction(e.callback))throw new Error("confirm requires a callback");return e.isLoaded=!1,N.dialog(e)},N.prompt=function(){var t,e,o,a,n,i,r;a=w(v.form),e={className:"bootbox-prompt",buttons:f("confirm","cancel"),value:"",inputType:"text"},(t=b(u(e,arguments,["title","callback"]),["confirm","cancel"])).draggable=!0,t.fullScreen=!1,3==arguments.length&&w.extend(!0,t,arguments[2]),i=t.show===c||t.show;var l=document.createElement("input");if(l.setAttribute("type",t.inputType),["date","time","number"][t.inputType]&&(t.inputType=l.type),t.message=a,t.buttons.cancel.callback=t.onEscape=t.onClose=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var o;switch(t.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":o=n.val();break;case"checkbox":var e=n.find("input:checked");o=[],k(e,function(e,t){o.push(w(t).val())})}return t.callback.call(this,o)},t.show=!1,!t.title)throw new Error("prompt requires a title");if(!w.isFunction(t.callback))throw new Error("prompt requires a callback");if(!v.inputs[t.inputType])throw new Error("invalid prompt type");switch(n=w(v.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":n.val(t.value);break;case"select":var s={};if(!(r=t.inputOptions||[]).length)throw new Error("prompt with select requires options");k(r,function(e,t){var o=n;if(t.value===c||t.text===c)throw new Error("given options in wrong format");t.group&&(s[t.group]||(s[t.group]=w("<optgroup/>").attr("label",t.group)),o=s[t.group]),o.append("<option value='"+t.value+"'>"+t.text+"</option>")}),k(s,function(e,t){n.append(t)}),n.val(t.value);break;case"checkbox":var d=w.isArray(t.value)?t.value:[t.value];if(!(r=t.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!r[0].value||!r[0].text)throw new Error("given options in wrong format");n=w("<div/>"),k(r,function(e,o){var a=w(v.inputs[t.inputType]);a.find("input").attr("value",o.value),a.find("label").append(o.text),k(d,function(e,t){t===o.value&&a.find("input").prop("checked",!0)}),n.append(a)})}return t.placeholder&&n.attr("placeholder",t.placeholder),t.pattern&&n.attr("pattern",t.pattern),a.append(n),a.on("submit",function(e){e.preventDefault(),o.find(".btn-primary").click()}),t.isLoaded=!1,(o=N.dialog(t)).off("shown.bs.modal"),o.on("shown.bs.modal",function(){n.focus()}),!0===i&&o.modal("show"),o},N.loadBody=function(e,t,o){if(e&&t&&0<w.trim(t.href).length){var a=w(e).find(".modal-body");if(0<a.size()){a.find(".bootbox-body").html('<h3 class="header smaller lighter grey loading-spinner align-center"  style="min-height: 100px !important;"><i class="icon-spinner icon-spin orange bigger-160"></i><span>&nbsp;&nbsp;页面正在加载中...</span></h3>'),-1<t.href.indexOf("?")?t.href=t.href+"&time="+(new Date).getTime():t.href=t.href+"?time="+(new Date).getTime(),window.api={data:t.data||{},opener:0<w("div.bootbox").size()?w("div.bootbox").last():document.body,document:e.find(".bootbox-body")};var n=w.extend(!0,{},t.data||{});delete n.colModel,w.ajaxSetup({async:!1}),a.find(".bootbox-body").load(t.href,n,function(){t.isLoaded=!0,o.resolve()}),w.ajaxSetup({async:!0})}}},N.dialog=function(d){delete y.width,(d=function(e){var a,n;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.href&&!e.message)throw new Error("Please specify a href or message");return(e=w.extend({},y,e)).buttons||(e.buttons={}),e.backdrop=!!e.backdrop&&"static",a=e.buttons,n=function(e){var t,o=0;for(t in e)o++;return o}(a),k(a,function(e,t,o){if(w.isFunction(t)&&(t=a[e]={callback:t}),"object"!==w.type(t))throw new Error("button with key "+e+" must be an object");t.label||(t.label=e),t.className||(t.className=n<=2&&o===n-1?"btn-default":"btn-primary")}),e}(d)).opener=0<w("div.bootbox").size()?w("div.bootbox").last():document.body,d.beforeRender.call(this);var c=w(v.dialog),u=c.find(".modal-body"),f=c.find(".modal-dialog"),b=c.find(".modal-header"),m=(c.find(".bootbox-body"),c.find(".modal-footer"));function p(){return"bootbox-alert"==d.className||"bootbox-confirm"==d.className||"bootbox-prompt"==d.className}function i(){var e=w(window).width(),t=w.isFunction(d.width)?d.width.call(this):d.width;if(t&&/.*%$/.test(t))return{windowWidth:e,realWidth:e*parseFloat(t)/100};if(t=parseInt(t),p())return{windowWidth:e,realWidth:t};var o=Math.max(Math.min(t,e),0);return e<=t?o=e-2*d.offsetWidth:e<=768?o=e-2*d.offsetWidth:300<=t?o=t:1280<e?o=e-4*d.offsetWidth:768<e&&e<=1280&&(o=e-2*d.offsetWidth),{windowWidth:e,realWidth:o=Math.max(o,300)}}function r(){u=c.find(".modal-body"),f=c.find(".modal-dialog"),b=c.find(".modal-header"),c.find(".bootbox-body"),m=c.find(".modal-footer");var e=w(window).width(),t=w(window).height(),o=w.fn.actual?w("#navbar_container").actual("outerHeight"):w("#navbar_container").outerHeight(!0),a=Math.abs(t-o),n=(w.fn.actual?f.actual("outerHeight"):f.outerHeight(!0))||f.height(),i=(w.fn.actual?b.actual("outerHeight"):b.outerHeight(!0))||b.height(),r=(w.fn.actual?m.actual("outerHeight"):m.outerHeight(!0))||m.height(),l=n-i-r,s=Math.abs(Math.abs(a-d.offsetHeight)-i-r);return{windowWidth:e,windowHeight:t,navbarHeight:o,containerHeight:a,dialogHeight:n,headerHeight:i,contentHeight:l,footerHeight:r,maxHeight:s,top:function(){return p()?(t-n)/2:(a-n)/2+o}.call(this)}}function a(){var e,t=r(),o=i(),a=o.realWidth;if(e=Math.max(t.top,0)<50?Math.max(t.top,0):Math.max(t.top,0)-50,d.draggable&&w.fn.draggable){f.addClass("modal-dialog-reset");var n=(o.windowWidth-f.width())/2;768<o.windowWidth||p()?(f.attr({style:"width: "+a+"px;"}),f.css({left:n+"px",top:e+"px",width:a+"px"})):f.css({left:n+"px",top:t.navbarHeight+"px",width:a+"px"})}else 768<o.windowWidth||p()?(f.attr({style:"width: "+a+"px;"}),f.css({top:e+"px",width:a+"px"})):f.css({top:t.navbarHeight+"px",width:a+"px"});l()}function l(){setTimeout(function(){var e,t=w(window).height(),o=c.find(".bootbox-body").height();350<(e=c.hasClass("box-full-screen")?t-140:t-200)&&300<o?f.find(".modal-body").css({"max-height":d.max_height?d.max_height:e}):(f.find(".bootbox-body").css({"max-height":"auto"}),f.find(".bootbox-body").removeAttr("overflow-x"),f.find(".bootbox-body").removeAttr("overflow-y")),parseInt(o)<200?c.find(".modal-body").css({"overflow-y":"inherit"}):c.find(".modal-body").css({"overflow-y":"scroll"}),parseInt(o)<100&&c.find(".modal-body").css({"overflow-x":"inherit"})},700)}w(c).data("options",d);var e=d.buttons,o="",n={onEscape:d.onEscape||w.noop,onClose:d.onClose||d.onEscape||w.noop};if(k(e,function(e,t){o+="<button id='btn_"+e+"' data-bb-handler='"+e+"' data-loading-text='"+t.label+"' type='button' class='btn btn-sm "+t.className+"'>"+t.label+"</button>",n[e]=t.callback}),!0===d.animate&&c.addClass("fade"),d.width){var t=i().realWidth;t&&(c.className=c.className||"bootbox-"+t,f.attr({style:"width: "+t+"px;"}))}if(d.height){var s=d.height?"height":"max-height",h=d.height||this.options.maxHeight;h&&c.find(".modal-body").css(s,h)}if(d.max_height?c.find(".modal-body").css("max-height",d.max_height):l(),d.className?c.addClass(d.className):c.addClass("bootbox-dialog"),d.title&&u.before(v.header),d.closeButton){var x=w(v.closeButton);d.title?c.find(".modal-header").prepend(x):x.css("margin-top","-10px").prependTo(u)}if(d.fullScreen){var g=w(v.fullScreen);c.find(".modal-header .bootbox-close").after(g),w(document).off("click",".bootbox-full").on("click",".bootbox-full",function(){c.hasClass("box-full-screen")?(c.removeClass("box-full-screen"),c.find(".modal-header .fa-minus-square-o").addClass("fa-square").removeClass("fa-minus-square-o")):(c.addClass("box-full-screen"),c.find(".modal-header .fa-square").addClass("fa-minus-square-o").removeClass("fa-square")),w(window).trigger("resize"),l()})}return d.modalName&&(c.attr("name",d.modalName),c.attr("id",d.modalName)),d.title&&c.find(".modal-title").html(d.title),o.length&&(u.after(v.footer),c.find(".modal-footer").html(o)),d.progress&&(u.after(v.progress),c.find(".progress-bar").attr("id",d.progressID||"bootboxStatus")),c.on("loaded.bs.modal",function(){w.isFunction(d.onLoaded)&&d.onLoaded.call(this,c)}),w.when(w.Deferred(function(e){c.data("def",e),d.message?(u.find(".bootbox-body").html(d.message),e.resolve()):N.loadBody(c,d,e)}).promise()).done(function(){l(),w(c).trigger("loaded.bs.modal")}),c.on("hide.bs.modal",function(e){c.off("resize.bs.modal").off("resized.bs.modal"),w.isFunction(d.onHide)&&d.onHide.call(this,e)}),c.on("hidden.bs.modal",function(e){e.target===this&&c.remove(),0==w("div.bootbox").size()&&w(document.body).removeClass("modal-open"),w.fn.fixed&&d.fixedTarget&&1==w(d.fixedTarget).size()&&w(d.fixedTarget).fixed("destroy"),w.isFunction(d.onHidden)&&d.onHidden.call(this,e)}),c.on("resized.bs.modal",function(e){a(),w.isFunction(d.onResized)&&d.onResized.call(this,e)}),c.on("show.bs.modal",function(e){d.backdrop&&c.next(".modal-backdrop").addClass("bootbox-backdrop"),w.isFunction(d.onShow)&&d.onShow.call(this,e)}),c.on("shown.bs.modal",function(e){a();var t=w("div.bootbox").size();if(1<t){var o=parseInt(c.css("z-index")||"1050")+100*(t-1);c.css("z-index",o+100),0!=d.backdrop&&w(document.body).find("div.modal-backdrop").last().css("z-index",o)}c.find("input[name='focusInput']").focus(),d.draggable&&w.fn.draggable&&(f.draggable({scroll:!0,containment:f.closest(".bootbox"),handle:".modal-header,.modal-footer",start:function(e,t){t.helper.offset().left;t.helper.addClass("modal-dialog-reset")},drag:function(e,t){},stop:function(e,t){t.helper.offset().top<0&&f.css({top:"0"}),l()}}),c.find(".modal-header,.modal-footer").css("cursor","move")),d.afterRender.call({api:window.api,content:self||window,document:c.find(".bootbox-body"),close:function(){c.modal("hide")},button:function(e){if(e&&e.id){var t=w.extend(!0,{},e);delete t.id,c.find(".modal-footer").find("button[data-bb-handler='"+e.id+"']").prop(t)}}}),c.removeClass("hide"),w.isFunction(d.onShown)&&d.onShown.call(this,e),w(window).trigger("resize"),l()}),c.on("escape.close.bb",function(e){n.onEscape&&C(e,c,d,n.onEscape)}),c.on("click",".modal-footer button",function(e){var t=w(this).data("bb-handler");C(e,c,d,n[t])}),c.on("click",".bootbox-close-button",function(e){n.onClose&&C(e,c,d,n.onClose)}),c.on("keyup",function(e){27===e.which&&c.trigger("escape.close.bb")}),w(d.container).append(c),w.when(c.data("def")).done(function(){var e=r();p()&&f.css({top:Math.max(e.top,0)+"px"}),c.modal({backdrop:d.backdrop,keyboard:!0,replace:!0,show:!1}),c.off("resize.bs.modal"),d.show&&c.modal("show"),w(window).resize(function(t){if(f.data("def"))return!1;w.when(w.Deferred(function(e){f.data("def",e),c.triggerHandler("resized.bs.modal",[t]),window.setTimeout(function(){e.resolve()},500)}).promise()).done(function(){f.removeData("def")})})}),c},N.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],w.extend(y,e)};var a=function(e){if(e){var t=e.contentWindow;try{e.src="about:blank",t.document.write(""),t.document.close(),t.document.clear()}catch(e){}w(e).remove()}};N.hideModal=function(e){w(".bootbox[name="+e+"]").find("iframe").each(function(e,t){a(t)}),w(".bootbox[name="+e+"]").modal("hide")},N.hideAll=function(){w(".bootbox").find("iframe").each(function(e,t){a(t)}),w(".bootbox").modal("hide")};var s={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"确  定",CANCEL:"取  消",CONFIRM:"确  认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return N.init=function(e){return t(e||w)},N}),function(m){m.extend({message:function(e,t,o,a){if(!(0<m("#statusModal").size()))return o=o||m.noop,a=a||{},m.dialog(m.extend(!0,{title:e||m.i18n.bootbox.titles.prompt,message:t,width:a.width||"800px",modalName:a.modalName||"msgModal",buttons:{cancel:{label:m.i18n.bootbox.buttons.success,className:"btn-default",callback:function(){return!m.isFunction(o)||o.call(this)}}}},a||{}))},alert:function(e,t,o){if(!(0<m("#statusModal").size())){if(e&&10<e.indexOf("timeSettingInfo")){if(o=m.extend(!0,{},{width:"700px",modalName:"timeSettingModal"},o||{}),0<m("#"+o.modalName).size())return;return m.message(m.i18n.bootbox.messages.open_tip,e,t,o)}var a=m.getTextLength(e||""),n=Math.ceil(a%50/50)+parseInt(a/50),i=300+(0<n?30*(n-1):0);if(o=m.extend(!0,{},{width:i+"px",modalName:"alertModal"},o||{}),!(0<m("#"+o.modalName).size()))return bootbox.alert(m.i18n.bootbox.titles.alert,'<div class="alert alert-modal"><p>'+e+"</p></div>",function(e){return!m.isFunction(t)||t.call(this,e)},o)}},error:function(e,t,o){if(!(0<m("#statusModal").size())){if(e&&10<e.indexOf("timeSettingInfo")){if(o=m.extend(!0,{},{width:"700px",modalName:"timeSettingModal"},o||{}),0<m("#"+o.modalName).size())return;return m.message(m.i18n.bootbox.messages.open_tip,e,t,o)}var a=m.getTextLength(e||""),n=Math.ceil(a%50/50)+parseInt(a/50),i=300+(0<n?30*(n-1):0);if(o=m.extend(!0,{},{width:i+"px",modalName:"errorModal"},o||{}),!(0<m("#"+o.modalName).size()))return bootbox.alert(m.i18n.bootbox.titles.error,'<div class="error error-modal"><p>'+e+"</p></div>",function(e){return!m.isFunction(t)||t.call(this,e)},o)}},success:function(e,t,o){if(!(0<m("#statusModal").size())){if(e&&10<e.indexOf("timeSettingInfo")){if(o=m.extend(!0,{},{width:"700px",modalName:"timeSettingModal"},o||{}),0<m("#"+o.modalName).size())return;return m.message(m.i18n.bootbox.messages.open_tip,e,t,o)}var a=m.getTextLength(e||""),n=Math.ceil(a%50/50)+parseInt(a/50),i=300+(0<n?30*(n-1):0);if(o=m.extend(!0,{},{width:i+"px",modalName:"successModal"},o||{}),!(0<m("#"+o.modalName).size()))return bootbox.alert(m.i18n.bootbox.titles.success,'<div class="success success-modal"><p>'+e+"</p></div>",function(e){return!m.isFunction(t)||t.call(this,e)},o)}},confirm:function(e,t,o){if(!(0<m("#statusModal").size())){if(e&&10<e.indexOf("timeSettingInfo")){if(o=m.extend(!0,{},{width:"700px",modalName:"timeSettingModal"},o||{}),0<m("#"+o.modalName).size())return;return m.message(m.i18n.bootbox.messages.open_tip,e,t,o)}var a=m.getTextLength(e||""),n=Math.ceil(a%50/50)+parseInt(a/50),i=300+(0<n?30*(n-1):0);return o=m.extend(!0,{},{width:i+"px",modalName:"confirmModal"},o||{}),m("#"+o.modalName).size(),bootbox.confirm(m.i18n.bootbox.titles.confirm,'<div class="alert confirm-modal"><p>'+e+"</p></div>",function(e){return!m.isFunction(t)||t.call(this,e)},o)}},prompt:function(t,e){if(!(0<m("#statusModal").size()||(e=m.extend(!0,{},{width:"300px",modalName:"promptModal"},e||{}),0<m("#"+e.modalName).size())))return bootbox.prompt(m.i18n.bootbox.titles.prompt,function(e){return!m.isFunction(t)||t.call(this,e)},e)},showDialog:function(e,t,o){if(!(0<m("#statusModal").size()))return o=o||{},m.dialog(m.extend({},o||{},{title:t,href:e||"",data:o.data||{}}))},dialog:function(e){if(!(0<m("#statusModal").size())){var t={title:m.i18n.bootbox.titles.prompt,href:"",data:{},message:"",backdrop:"static",keyboard:!0,offAtOnce:!0,draggable:!0,onLoaded:null,onClose:null,onEscape:null,onHide:null,onHidden:null,onResize:null,onResized:null,onShow:null,onShown:function(){m('[data-toggle*="validation"]').trigger("validation"),m('[data-toggle*="fixed"]').trigger("fixed"),m('input[type="checkbox"],input[type="radio"]').trigger("iCheck"),m.fn.tooltip&&m('[data-toggle*="tooltip"]').tooltip({container:"body"}),m.fn.fixed&&e.fixedTarget&&1==m(e.fixedTarget).size()&&m(e.fixedTarget).fixed({scrollElement:m("#"+e.modalName),container:m("#"+e.modalName).find(".modal-dialog"),z_index:m("#"+e.modalName).css("z-index")})}},o=m.extend({},t,e);return m.founded(o.data.ckUrl)&&(o.data.ckUrl=encodeURIComponent(o.data.ckUrl||"")),m.founded(o.data.shUrl)&&(o.data.shUrl=encodeURIComponent(o.data.shUrl||"")),bootbox.dialog(o)}},closeModal:function(e){bootbox.hideModal(e)},closeAllModal:function(){bootbox.hideAll()}}),m.fn.reloadDialog=function(a){return this.each(function(){var t=m(this),o=m(t).data("options");o&&m(t).hasClass("bootbox")&&m.when(m.Deferred(function(e){t.data("def",e),o.message?(t.find(".bootbox-body").html(o.message),e.resolve()):bootbox.loadBody(t,m.extend(o,a||{}),e)}).promise()).done(function(){m(t).trigger("loaded.bs.modal")})})},m.exportDialog=function(e,t,o,a,n,i){if(!(0<m("#statusModal").size())){if(!m.founded(t))throw new Error("dcclbh 不能为空 !");var r=_path+"/zftal/drdc/export_exportInitDcpz.html",l={dcclbh:t};if(a&&0<a.length)for(var s=0,d=0;d<a.length;d++){var c=a[d];0<m.trim(c.label).length&&0<m.trim(c.index).length&&1!=c.hidden&&(l["colConfig["+s+"].zd"]=c.name,l["colConfig["+s+"].zdmc"]=c.label,l["colConfig["+s+"].xssx"]=s,s++)}if(jQuery.ajaxSetup({async:!1}),m.post(r,l),jQuery.ajaxSetup({async:!0}),(o=o||{}).dcclbh=t,m.founded(n)&&0<m(n).size()){var u=m(n).jqGrid("getGridParam","sortname"),f=m(n).jqGrid("getGridParam","sortorder");m.defined(u)&&(o["queryModel.sortName"]=u),m.defined(f)&&(o["queryModel.sortOrder"]=f)}var b=m.buildForm("drdcForm",e,o);m.dialog({title:m.i18n.bootbox.titles.export,href:_path+"/zftal/drdc/export_exportConfig.html",data:{dcclbh:t},width:"900px",modalName:"ExportModal",buttons:{bcdc:{label:m.i18n.bootbox.buttons.export,className:"btn-primary",callback:function(){var e=this.content.saveConfig(b,i);return!m.defined(e)||e}},cancel:{label:m.i18n.bootbox.buttons.cancel,className:"btn-default"}}})}},m.showSortDialog=function(e,t,o){if(!(0<m("#statusModal").size())){if(!m.founded(e))throw new Error("业务数据ID不能为空 !");if(!m.founded(t))throw new Error("功能模块代码不能为空 !");o=m.defined(o)&&jQuery.isFunction(o)?o:m.noop;var n={ywsj_id:e,gnmkdm:t};m.dialog({title:m.i18n.bootbox.titles.showSort,href:_path+"/xtgl/ywsjPxxx_cxYwsjPxxx.html",data:n,width:"500px",modalName:"sortModal",buttons:{success:{label:m.i18n.bootbox.buttons.success,className:"btn-primary",callback:function(){var a=[];return m("#sort_table_body").find("tr.sort-item").each(function(e,t){var o=m(t).data("order");a.push({yxj:e+1,pxfs:m.founded(o)?o:"asc",zdmc:m(t).data("sort")}),n["list["+e+"].yxj"]=e+1,n["list["+e+"].pxfs"]=a[e].pxfs,n["list["+e+"].zdmc"]=a[e].zdmc}),m.ajaxSetup({async:!1}),m.post(_path+"/xtgl/ywsjPxxx_cxYwsjPxxxForUpdate.html",n,function(e){m.closeModal("sortModal"),o.call(this,a)}),m.ajaxSetup({async:!0}),!1}},cancel:{label:m.i18n.bootbox.buttons.cancel,className:"btn-default"}}})}},m.fullAvatarDialog=function(e,t,o){0<m("#statusModal").size()||(t.upload_url=encodeURIComponent(t.upload_url||""),t.src_url=encodeURIComponent(t.src_url||""),m.dialog({title:e||m.i18n.bootbox.titles.fullAvatar,draggable:!1,href:_path+"/editor/fullAvatar_cxFullAvatarUpload.html",data:t||{},width:"700px",modalName:"FullAvatarUpload",onHidden:function(){m.isFunction(o)&&o.call(this)},buttons:{success:{label:m.i18n.bootbox.buttons.upload,className:"btn-primary",callback:function(){return swf_object&&swf_object.call("upload"),!1}},reelect:{label:m.i18n.bootbox.buttons.choice,className:"btn-primary",callback:function(){return swf_object&&swf_object.call("changepanel","upload"),!1}},cancel:{label:m.i18n.bootbox.buttons.cancel,className:"btn-default",callback:function(){}}}}))},m.fullAvatarURLDialog=function(e,t,o,a,n){if(!(0<m("#statusModal").size())){if(!m.founded(e))throw new Error("paramURL 不能为空 !");m.post(e,o,function(e){m.fullAvatarDialog(t,m.extend({},a||{},e||{}),n)})}},m.reportDialog=function(e,t){if(!(0<m("#statusModal").size())){if(e=e||{},!m.founded(e.reportID))throw new Error("reportID 不能为空 !");var o=m.extend(!0,{},e,{reportID:encodeURIComponent(e.reportID||""),viewType:"dialog",searchType:e.searchType||"",gnmkdm:e.gnmkdm||m("#gnmkdmKey").val()});m.dialog({title:e.title||m.i18n.bootbox.titles.report,href:_path+"/report/report_cxReportIndex.html",data:o,width:e.width||m("#yhgnPage").innerWidth()+"px",modalName:"ReportModal",onHidden:function(){m.isFunction(t)&&t.call(this)},buttons:{cancel:{label:m.i18n.bootbox.buttons.cancel,className:"btn-default"}}})}},m.batchModifyDialog=function(e,t){if(!(0<m("#statusModal").size())){e=e||{};var o=m.extend(!0,{},e,{gnmkdm:e.gnmkdm||m("#gnmkdmKey").val()});if(!m.founded(o.gnmkdm))throw new Error("gnmkdm 不能为空 !");if(!m.founded(o.plxgURL))throw new Error("plxgURL 不能为空[该路径为最终执行批量修改操作的请求路径] !");m.dialog(m.extend({},addConfig,{title:e.title||m.i18n.bootbox.titles.batchModify,href:_path+"/xtgl/plxg_cxPlxgSettings.html",data:o,width:e.width||"600px",modalName:"ReportModal",onHidden:function(){m.isFunction(t)&&t.call(this)}}))}},m.fn.clearElements=function(){return this.each(function(){if(m(this).is("input,select,textarea"))m(this).clearFields(),m(this).trigger("chosen:updated"),m(this).trigger("kineditor:sync");else{var e=m(this).find("input,select,textarea").filter(function(e){return!m(this).hasClass("ignore")}),t=m(e).filter('[data-clear="true"]');0<t.size()?(m(t).clearFields(),m(t).trigger("chosen:updated"),m(t).trigger("kineditor:sync")):(m(e).clearFields(),m(e).trigger("chosen:updated"),m(e).trigger("kineditor:sync"))}})}}(jQuery);var viewConfig={width:"500px",modalName:"viewModal",offAtOnce:!0,buttons:{cancel:{label:"关 闭",className:"btn-default",callback:function(){}}}},addConfig={width:"900px",modalName:"addModal",formName:"ajaxForm",gridName:"tabGrid",offAtOnce:!1,buttons:{success:{label:"确 定",className:"btn-primary",callback:function(){var o=this,a=o.options||{};return submitForm(a.formName||"ajaxForm",function(e,t){o.reset(),"string"===$.type(e)?-1<e.indexOf("成功")?$.success(e,function(){a.offAtOnce&&$.closeModal(a.modalName),$(o.document).clearElements();var e=$("#"+a.gridName||"tabGrid");0<$(e).size()&&$(e).reloadGrid()}):-1<e.indexOf("失败")?$.error(e,function(){}):$.alert(e,function(){}):$.isPlainObject(e)&&("success"==e.status?$.success(e.message,function(){a.offAtOnce&&$.closeModal(a.modalName),$(o.document).clearElements();var e=$("#"+a.gridName||"tabGrid");0<$(e).size()&&$(e).reloadGrid()}):"error"==e.status?$.error(e.message):$.alert(e.message))}),!1}},cancel:{label:"关 闭",className:"btn-default"}}},modifyConfig={width:"900px",modalName:"modifyModal",formName:"ajaxForm",gridName:"tabGrid",offAtOnce:!0,buttons:{success:{label:"确 定",className:"btn-primary",callback:function(){var o=this,a=o.options||{};return submitForm(a.formName||"ajaxForm",function(e,t){o.reset(),"string"===$.type(e)?-1<e.indexOf("成功")?$.success(e,function(){a.offAtOnce&&$.closeModal(a.modalName||"modifyModal");var e=$("#"+a.gridName||"tabGrid");0<$(e).size()&&$(e).reloadGrid()}):-1<e.indexOf("失败")?$.error(e,function(){}):$.alert(e,function(){}):$.isPlainObject(e)&&("success"==e.status?$.success(e.message,function(){a.offAtOnce&&$.closeModal(a.modalName||"modifyModal");var e=$("#"+a.gridName||"tabGrid");0<$(e).size()&&$(e).reloadGrid()}):"error"==e.status?$.error(e.message):$.alert(e.message))}),!1}},cancel:{label:"关 闭",className:"btn-default"}}},shConfig={width:"900px",modalName:"shModal",fixedTarget:"#fixtop",buttons:{}};jQuery,bootbox.setDefaults({show:!0,progress:!1,btnlock:!1,backdrop:!1,draggable:!1,closeButton:!0,animate:!1,className:"my-modal"}),function(e){e.i18n=e.i18n||{},e.i18n.bootbox=e.i18n.bootbox||{},e.extend(e.i18n.bootbox,{buttons:{success:"确 定",cancel:"关 闭",export:"导出",upload:"上 传",choice:"选 择"},titles:{success:"成功提示",alert:"警告提示",error:"错误提示",confirm:"确认提示",prompt:"信息提示",export:"自定义导出",report:"报表预览",batchModify:"批量修改数据",fullAvatar:"富头像上传",showSort:"排序优先级设置"},messages:{open_tip:"功能时间开放提示"}}),bootbox.setDefaults({locale:"zh_CN"}),e.extend(!0,viewConfig||{},{buttons:{cancel:{label:e.i18n.bootbox.buttons.cancel}}}),e.extend(!0,addConfig||{},{buttons:{success:{label:e.i18n.bootbox.buttons.success},cancel:{label:e.i18n.bootbox.buttons.cancel}}}),e.extend(!0,modifyConfig||{},{buttons:{success:{label:e.i18n.bootbox.buttons.success},cancel:{label:e.i18n.bootbox.buttons.cancel}}})}(jQuery);